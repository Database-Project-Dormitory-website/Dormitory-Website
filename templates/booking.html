{% extends 'base.html' %}

{% block content %}

<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
<style>
.container {
    max-width: 400px;
    margin: 0 auto;
    padding: 20px;
}

h1 {
    text-align: center;
    margin-bottom: 20px;
}

.form-control {
    margin-bottom: 15px;
}

#priceDisplay {
    font-weight: bold;
    margin-top: 20px;
}
</style>

<div class="row justify-content-center">
    <div class="col-md-4">
        <h1 class="text-center" style="margin-top: 100px;">Check for available rooms</h1>
        <!-- <form method="POST">
            <div class="mb-3">
                <label for="datepicker" class="form-label">Select move in date:</label>
                <input type="date" class="form-control" id="datepicker" name="datepicker" />
            </div>
            <div class="mb-3">
                <label for="last_name" class="form-label">Last Name</label>
                <input type="text" class="form-control" id="last_name" name="last_name" />
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-outline-danger">Submit</button>
            </div>
        </form> -->
        <form method="POST">
            <div>
                <label for="datepicker" class="form-label">Select move in date:</label>
                <input type="text" id="datepicker" class="form-control" placeholder="Select a date" name="datepicker">
            </div>
            <div>
                <label for="bedTypeSelect" class="form-label">Select bed type:</label>
                <select id="bedTypeSelect" class="form-control" name="bedTypeSelect">
                    <option value="r1">Single Bed</option>
                    <option value="r2">Double Bed</option>
                </select>
            </div>
            <div>
                <label for="contractDurationSelect" class="form-label">Select contract type:</label>
                <select id="contractDurationSelect" class="form-control" name="contractDurationSelect">
                    <option value="s1">6 Months</option>
                    <option value="s2">1 Year</option>
                </select>
            </div>
            <div class="text-center" style="margin-top: 30px;">
                <button type="submit" class="btn btn-outline-danger">Confirm</button>
            </div>
        </form>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<script>
$(document).ready(function() {
    var minDate = new Date();
    minDate.setMonth(minDate.getMonth() + 1);
    
    var maxDate = new Date(minDate.getFullYear(), minDate.getMonth() + 6, 0);

    $("#datepicker").datepicker({
    dateFormat: "yy-mm-dd",
    minDate: minDate,
    maxDate: maxDate,
    onSelect: function(dateText) {
        console.log("Booking date: " + dateText);
    }
    });

    $("#datepicker, #bedTypeSelect, #contractDurationSelect").change(function() {
    var selectedDate = $("#datepicker").val();
    var bedType = $("#bedTypeSelect").val();
    var contractDuration = $("#contractDurationSelect").val();

    if (selectedDate && name && bedType && contractDuration) {
        console.log("Registration Successful");
        console.log("Bed Type: " + bedType);
        console.log("Contract Duration: " + contractDuration);

        var price = 0;
        if (bedType === "single") {
        if (contractDuration === "6months") {
            price = 8000;
        } else if (contractDuration === "1year") {
            price = 6000;
        }
        } else if (bedType === "double") {
        if (contractDuration === "6months") {
            price = 12000;
        } else if (contractDuration === "1year") {
            price = 10000;
        }
        }

        $("#priceDisplay").text("Price: " + price + " THB");
    } else {
        console.log("Please fill in all fields");
    }
    });
});
</script>

{% endblock %}